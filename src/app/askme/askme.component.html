<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<script src="askme.js"></script>
<div class="page-wrapper">
<div class="sidebar position-relative">
  <nav class="navbar navbar-expand-lg">
      <div class="container-fluid">
          <a href="" class="navbar-brand my-4 ms-3"><img _ngcontent-upr-c1="" src="../assets/company-logo.png"
                  alt="Company Logo"></a>
          <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navigationBar">
              <span class="navbar-toggler-icon"></span>
          </button>

          <!-- <div *ngIf="loginSuccess" class="alert alert-success" role="alert">
              Login successful..!
            </div> 
            <div *ngIf="loginError" class="alert alert-danger" role="alert">
              Login failed..!
          </div>  -->


          <div class="collapse navbar-collapse" id="navigationBar">
              <ul class="navbar-nav navigation-top-link">
                  <li class="nav-item mb-2">
                      <a href="#" class="nav-link" routerLink="../Admin_dashboardComponent"><i class="bi bi-house-door me-3"></i><span>Dashboard</span></a>
                  </li>
                  <!-- <li class="nav-item mb-2">
                      <a href="#" class="nav-link" routerLink="../admin_subject"><i
                              class="bi bi-speedometer2  me-3"></i><span>Subject</span></a>
                  </li> -->
                  <li class="nav-item mb-2">
                      <a href="#" class="nav-link disabled " routerlink="../admin_subtopic"><i class="bi bi-bug  me-3"></i><span>Forum</span></a>
                  </li>
                  <li class="nav-item mb-2">
                      <a href="#" class="nav-link disabled"><i class="bi bi-grid  me-3"></i><span>Library</span> </a>
                  </li>
                  <li class="nav-item mb-2">
                      <a href="#" class="nav-link disabled"><i class="bi bi-people  me-3"></i><span>My Profile</span></a>
                  </li>
                  <li class="nav-item mb-2">
                      <a href="#" class="nav-link highlight-item" routerLink="../askme"><i class="bi bi-question-circle  me-3"></i><span>Ask me</span></a>
                  </li>

                  <!-- <li class="nav-item mb-2">
                      <a href="#" class="nav-link" routerLink="../chatbot"><i class="bi bi-question-circle  me-3"></i><span>Chat</span></a>
                  </li> -->

               

                  <li class="nav-item mb-2">
                      <a href="#" class="nav-link disabled"><i class="bi bi-gear  me-3"></i><span>Settings</span></a>
                  </li>
               
              </ul>
            
          </div>

      </div>
  </nav>
</div>


<!--side bar ends-->
<div class="container mt-4">
    <div class="row">
      <div class="col-md-6 with-scrollbar">
        <div class="chat-wrap pe-lg-5 pe-md-2">
          <h3 class="faq-title" style="margin-top: 20px;">Ask Me </h3>
  
          <div class="chat-section">
            <!-- Existing code for displaying questions and answers -->
  
           <div *ngFor="let question of questions" class="row"> 
              <!-- <div class="col-xl-7 col-lg-9 offset-lg-3 offset-xl-5"> -->
                <div class="col-xl-12 col-lg-12 offset-lg-12 offset-xl-12">
                <div class="chat-ques-name text-end fw-bold">{{ question.userName }}</div>
                <div class="chat-ques-time text-end"><small>{{ formatTimestamp(question.timestamp) }}</small></div>
                <div class="chat-ques px-lg-4 px-md-2 px-2 py-3 mb-4"><b>

                  {{ question.text }} 
                </b>
                 
                   <!-- <div class="chat-reply px-lg-4 px-md-2 px-2 py-3 mb-4">
                    <div *ngIf="question.answers.length > 0">{{ question.answers[0]}}</div>
                  </div> -->

                  <div class="chat-reply px-lg-4 px-md-2 px-2 py-3 mb-4" *ngIf="question.answers.length > 0">
                    <div>{{ question.answers[0].text }}</div>
                  </div>
                 
                  <ng-container *ngIf="question.showAllAnswers">
                    <!-- <div *ngFor="let answer of question.answers.slice(1)">
                      <div class="chat-reply px-lg-4 px-md-2 px-2 py-3 mb-4">
                        <div>{{ answer.text }}</div>
                      </div>
                    </div> -->
                    <div *ngFor="let answer of question.answers.slice(1)">
                      <div class="chat-reply px-lg-4 px-md-2 px-2 py-3 mb-4">
                        <div>{{ answer.text }}</div>
                        <!-- Add other details like username and timestamp if needed -->
                      </div>
                    </div>
                  </ng-container>
                  
                  <div class="button-group">
                    <!-- <button *ngIf="!question.answer" (click)="replyToQuestion(question)" class="btn btn-primary smaller-button">Comment</button> -->
                    <button *ngIf="!question.answer" (click)="showAnswerInput(question)" class="btn btn-primary smaller-button">Comment</button>

                    <button *ngIf="!question.answer && question.answers.length > 1" (click)="showAllAnswers(question)" class="btn btn-primary smaller-button"> {{ question.showAllAnswers ? 'Hide answers' : 'Show all answers' }}</button>
                  </div>




                   <!-- <div class="chat-reply px-lg-4 px-md-2 px-2 py-3 mb-4">
                    <div *ngIf="!question.showAllAnswers">
                      <div>{{ question.answers[0]?.text }}</div>
                      <div>{{ question.answers[0]?.userName }}</div>
                      <div><small>{{ formatTimestamp(question.answers[0]?.timestamp) }}</small></div>
                    </div>
                    <div *ngIf="question.showAllAnswers">
                      <div *ngFor="let answer of question.answers">
                        <div>{{ answer.text }}</div>
                        <div>{{ answer.userName }}</div>
                        <div><small>{{ formatTimestamp(answer.timestamp) }}</small></div>
                      </div>
                    </div>
                    <button (click)="toggleShowAllAnswers(question)" class="btn btn-primary">{{ question.showAllAnswers ? 'Hide Answers' : 'Show all answers' }}</button>
                    <button *ngIf="!question.showAllAnswers" (click)="replyToQuestion(question)" class="btn btn-primary">Comment</button>
                  </div>    -->

                  <!-- <div class="chat-reply px-lg-4 px-md-2 px-2 py-3 mb-4">
                    <div *ngIf="question.answers.length > 0">
                      <div *ngFor="let answer of question.answers">{{ answer.text }}</div>
                    </div>
                    <button *ngIf="!question.answered" (click)="replyToQuestion(question)" class="btn btn-primary">Comment</button>
                  </div> -->
                  
                 
                </div>
              
                <!-- <div class="chat-reply px-lg-4 px-md-2 px-2 py-3 mb-4">
                    <div *ngIf="question.answer">{{ question.answer }}</div>
                     <button *ngIf="!question.answer" (click)="replyToQuestion(question)" class="btn btn-primary">Reply</button> 
                  </div>  -->
                

              </div> 

                <!-- Answer input UI -->
                <div *ngIf="question.showAnswerInput" class="answer-input">
                  <div class="d-flex">
                    <input #answerInput type="text" class="form-control" placeholder="Type your answer here">
                    <button (click)="replyToQuestion(question)" class="btn-e20086 me-2">Submit</button>
                    <button (click)="cancelAnswerInput(question)" class="btn-e20086">Cancel</button>

                  </div>
                </div>

  
            </div>  

            <!--new code start-->
            <!-- <div class="chat-section">
                <div *ngFor="let question of questions" class="row">
                  <div class="col-xl-7 col-lg-9 offset-lg-3 offset-xl-5">
                    <div class="chat-ques-name text-end fw-bold">{{ question.userName }}</div>
                    <div class="chat-ques-time text-end"><small>{{ question.timestamp }}</small></div>
                    <div class="chat-ques px-lg-4 px-md-2 px-2 py-3 mb-4">
                      {{ question.text }}
                      <button *ngIf="!question.answer" (click)="replyToQuestion(question)" class="btn btn-primary">Reply</button>
                    </div>
                  </div>
                </div>
                <div *ngFor="let question of questions" class="row">
                  <div *ngIf="question.answer" class="offset-xl-1 offset-lg-3 col-xl-5 col-lg-9">
                    <div class="chat-reply px-lg-4 px-md-2 px-2 py-3 mb-4">
                      {{ question.answer }}
                    </div>
                  </div>
                </div>
              </div> -->
              
            <!--new code end-->
        </div>

        
              <!--new code**********************************-->
              <!-- <div *ngFor="let question of questions" class="row">
                <div class="col-xl-7 col-lg-9 offset-lg-3 offset-xl-5">
                  <div class="chat-ques-name text-end fw-bold">{{ question.userName }}</div>
                  <div class="chat-ques-time text-end"><small>{{ question.timestamp }}</small></div>
                  <div class="chat-ques px-lg-4 px-md-2 px-2 py-3 mb-4">
                    {{ question.text }}
                    <button *ngIf="!question.answer" (click)="replyToQuestion(question)" class="btn btn-primary">Reply</button>
                  </div>
                </div>
              </div> -->
              
              <!-- <div *ngFor="let question of questions" class="row">
                <div class="col-xl-7 col-lg-9">
                  <div class="chat-reply px-lg-4 px-md-2 px-2 py-3 mb-4">
                    <div *ngIf="question.answer">{{ question.answer }}</div>
                  </div>
                </div>
              </div> -->
              
              <!--new code end-->
            
              <!-- <div class="fixed-bottom"> -->
          <div class="input-group mb-3 query-sec px-lg-4 px-2 px-md-2 py-3">
            <input [(ngModel)]="newQuestion" type="text" class="form-control bg-transparent border-0"
              placeholder="Type your query here" aria-label="Recipient's username" aria-describedby="button-addon2">
            <button (click)="askQuestion()" class="btn btn-secondary coloured-btn" type="button" id="button-addon2">
              <i class="material-icons">&#xe163;</i>
            </button>
          </div>
        <!-- </div> -->
  
          <div class="unanswer-sec mb-3 px-lg-4 px-2 px-md-2 py-3"  *ngIf="unansweredCount > 0">
            <p class="mb-0 fw-bold">{{ unansweredCount }} unanswered question(s)</p>
            <p class="mb-0">Do you know the answer to these?</p>
            

            <div class="unanswer-sec mb-3 px-lg-4 px-2 px-md-2 py-3" *ngIf="showUnansweredQuestions">
                <div *ngFor="let unansweredQuestion of unansweredQuestions">
                  {{ unansweredQuestion.text }}
                  <button (click)="replyToQuestion(unansweredQuestion)" class="btn btn-primary btn-sm">Comment</button>
                </div>
              </div>
              
              <button (click)="toggleUnansweredQuestions()" class="btn btn-primary coloured-btn"  *ngIf="unansweredCount > 0">
                Yes, Provide Answers <span><i class="bi bi-chevron-right"></i></span>
              </button>
          </div>
        </div>
      </div>



      <!-- FAQ Section (unchanged) -->
      <div class="col-md-6">
        <div class="faq-outer-wrap ps-lg-4 ps-md-0 py-3">
            <h3 class="faq-title mb-md-4 mb-2">FAQ's</h3>
            <div class="accordion faq-wrap" id="accordionExample">
                <div class="accordion-item border-top-0 border-start-0 border-end-0 pb-2">
                    <h2 class="accordion-header faq-header" id="headingOne">
                        <button class="accordion-button collapsed ps-0" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                            <span class="me-3">1.</span> How does iMedOne aid doctors and hospitals ?
                        </button>
                    </h2>
                    <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne"
                        data-bs-parent="#accordionExample">
                        <div class="accordion-body">
                            Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum
                            has been the industry's <a href="../Admin_dashboardComponent">For more details</a>
                        </div>
                    </div>
                </div>
               


            </div>
        </div>

    </div>
    </div>
  </div>
</div>  